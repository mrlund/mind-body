/*! Built with http://stenciljs.com */
App.loadBundle("i7odpaaj",["exports"],function(e){var t=window.App.h,i=function(){function e(){this.isClassroomModeOn=!1,this.paused=!0,this.dataLoaded=!1,this.firstFramePath="",this.basePath="../../assets/project",this.isBusy=!1,this.formattedProgress="0"}return e.prototype.componentWillLoad=function(){var e=document.createElement("script");this.firstFramePath=this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/"+this.animation+".jpg",e.src=this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/"+this.animation+".js",document.body.appendChild(e);var t=this;window.playSound=function(e,i){return t.sound&&t.sound.stop(),t.sound=createjs.Sound.play(e,createjs.Sound.INTERRUPT_EARLY,0,0,i),t.sound}},e.prototype.loadAnimation=function(){if(createjs.Sound.initializeDefaultPlugins()){this.canvas=document.getElementById("canvas1");var e=new createjs.LoadQueue(!1);e.installPlugin(createjs.Sound),e.addEventListener("complete",this.handleComplete(this)),e.addEventListener("fileload",this.handleFileLoad),e.addEventListener("progress",this.handleQueueProgress(this)),e.loadManifest(lib.properties.manifest,!0,this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/")}},e.prototype.doneLoading=function(){this.isBusy=!1,this.dataLoaded=!0},e.prototype.handleFileLoad=function(e){"image"==e.item.type&&(window.createJSImages||(window.createJSImages={}),window.images||(window.images={}),window.createJSImages[e.item.id]=e.result,window.images[e.item.id]=e.result)},e.prototype.handleQueueProgress=function(e){return function(t){e.formattedProgress=t.loaded?(100*t.loaded).toFixed(0):"0",1==t.loaded&&(console.log("Done loading",e.isBusy),e.doneLoading())}},e.prototype.handleComplete=function(e){return this.paused=!1,function(){e.stage=new createjs.Stage("canvas1"),e.stage.addChild(new lib[e.animation]),createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",e.tickHandler(e)),createjs.Ticker.setPaused(!1),e.resizeAnimation(e);var t=null;e.stage.getChildAt(0)&&e.stage.getChildAt(0).soundTrack?t=e.stage.getChildAt(0).soundTrack:e.stage.getChildAt(0)&&e.stage.getChildAt(0).children[0]&&e.stage.getChildAt(0).children[0].soundTrack&&(t=e.stage.getChildAt(0).children[0].soundTrack),t||(t=createjs.Sound._instances[0])}},e.prototype.resizeAnimation=function(e){if(this.dataLoaded){var t=document.getElementById("canvas1").offsetWidth;document.getElementById("canvas1").style.height=t+"px",document.getElementById("canvas1").style.width=t+"px",e.sizeOfCanvas=t,e.stage&&(e.stage.width=t,e.stage.height=t)}},e.prototype.tickHandler=function(e){var t=!1;return function(i){e.paused||i.paused||e.stage.update();var n=e.stage.children[0];if(e.timeline=n.timeline,e.timeline.position%10==0&&(e.currentProgressWidth=parseFloat((e.timeline.position/e.timeline.duration*e.sizeOfCanvas).toFixed(0))),0==e.timeline.position&&(t=!1),e.timeline.duration-e.timeline.position==1&&!t){t=!0,createjs.Ticker.setPaused(!0);var o=e.sound;o&&o.setPaused(!0)}}},e.prototype.playPauseAnimation=function(){if(createjs&&createjs.Ticker){var e=!createjs.Ticker.getPaused(),t=this.sound;t&&t.setPaused(e),createjs.Ticker.setPaused(e),this.paused=e}},e.prototype.rewindAnimationTo=function(e){var t=this.stage.children[0],i=t.timeline;e<0&&(e=0),e>i.duration&&(e=i.duration-10);var n=this.sound;n&&n.setPaused(!0),this.paused?(t.gotoAndStop(e),this.stage.update(),n&&!n.getPaused()&&n.setPaused(!0)):t.gotoAndPlay(e)},e.prototype.rewindAnimation=function(e){e.stopPropagation();var t=this.stage.children[0].timeline,i=Math.round(e.offsetX/this.sizeOfCanvas*t.duration);this.rewindAnimationTo(i)},e.prototype.rewind5Sec=function(){var e=lib.properties.fps,t=this.stage.children[0].timeline.position-5*e;this.rewindAnimationTo(t)},e.prototype.fastForward5Sec=function(){var e=lib.properties.fps,t=this.stage.children[0].timeline.position+5*e;this.rewindAnimationTo(t)},e.prototype.playButtonAction=function(){this.dataLoaded?this.playPauseAnimation():this.loadAnimation()},e.prototype.muteVolume=function(){var e=this.sound;e&&(e.volume=0)},e.prototype.downVolume=function(){var e=this.sound;e&&e._getVolume()>.9&&(e.volume=e._getVolume()-.1)},e.prototype.upVolume=function(){var e=this.sound;e&&e._getVolume()<1&&(e.volume=e._getVolume()+.1)},e.prototype.render=function(){var e=this;return t("div",{class:"canvas-container"},!this.isClassroomModeOn&&this.dataLoaded?t("canvas",{width:"500",height:"500",id:"canvas1",onClick:function(){return e.playButtonAction()},class:"video-canvas"}):"",this.dataLoaded?"":t("img",{class:"frame-img",src:this.firstFramePath}),this.isClassroomModeOn?t("img",{class:"overlay-img",src:"/assets/img/play-button-disabled-overlay.png"}):"",this.isClassroomModeOn||this.isBusy||!this.paused?"":t("img",{class:"overlay-img",onClick:function(){return e.playButtonAction()},src:"/assets/img/play-button-overlay.png"}),this.dataLoaded?t("div",{class:"navControls"},t("div",{class:"progressBar",onClick:function(){return e.rewindAnimation.bind(e)}},t("div",{class:"currentProgress",style:{width:this.currentProgressWidth+"px"}})),t("div",{class:"button-panel"},t("ion-button",{color:"primary",onClick:function(){return e.rewind5Sec()}}," ",t("ion-icon",{name:"rewind"})," "),t("ion-button",{color:"primary",onClick:function(){return e.playButtonAction()}}," ",this.paused?t("ion-icon",{name:"play"}):t("ion-icon",{name:"pause"})),t("ion-button",{color:"primary",onClick:function(){return e.fastForward5Sec()}}," ",t("ion-icon",{name:"fastforward"})," "))):"",this.isBusy?t("div",null,t("div",{class:"uil-ring-css"},t("div",null),t("a",null,this.formattedProgress))):"")},Object.defineProperty(e,"is",{get:function(){return"app-animation"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{animation:{type:String,attr:"animation"},chapter:{type:String,attr:"chapter"},currentProgressWidth:{state:!0},dataLoaded:{state:!0},isClassroomModeOn:{type:Boolean,attr:"is-classroom-mode-on"},paused:{state:!0},project:{type:String,attr:"project"},session:{type:String,attr:"session"},sizeOfCanvas:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".video-canvas{background-color:#fff;position:relative;display:block;max-width:100%;height:auto}.canvas-container{position:relative}.frame-img{position:absolute;display:block;max-width:100%;width:auto;height:auto}.overlay-img{position:absolute;z-index:9999;top:0;display:block;max-width:100%;width:auto;height:auto}.button-panel{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.navControls{position:relative}.navControls .progressBar{position:relative;left:0;right:0;height:20px;background-color:#8aadea}.navControls .progressBar .currentProgress{position:relative;height:20px;background-color:#488aff;-webkit-transition:width .5s;transition:width .5s}"},enumerable:!0,configurable:!0}),e}(),n=function(){function e(){}return e.prototype.render=function(){return t("ion-page",{class:"show-page"},t("ion-header",{"md-height":"56px"},t("ion-toolbar",{color:"primary"},t("ion-title",null,"G3DA PWA"))),t("ion-content",null,t("app-animation",{project:"1",session:"1",chapter:"intro",animation:"p1s1"})))},Object.defineProperty(e,"is",{get:function(){return"app-home"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}();e.AppAnimation=i,e.AppHome=n,Object.defineProperty(e,"__esModule",{value:!0})});