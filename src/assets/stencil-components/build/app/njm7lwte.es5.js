/*! Built with http://stenciljs.com */
App.loadBundle("njm7lwte",["exports"],function(t){var e=window.App.h,i=function(){function t(){this.isClassroomModeOn=!1,this.paused=!0,this.dataLoaded=!1,this.firstFramePath="",this.basePath="../../assets/project",this.isBusy=!1,this.formattedProgress="0"}return t.prototype.componentWillLoad=function(){var t=document.createElement("script");this.firstFramePath=this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/"+this.animation+".jpg",t.src=this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/"+this.animation+".js",document.body.appendChild(t);var e=this;window.playSound=function(t,i){return e.sound&&e.sound.stop(),e.sound=createjs.Sound.play(t,createjs.Sound.INTERRUPT_EARLY,0,0,i),e.sound}},t.prototype.loadAnimation=function(){if(createjs.Sound.initializeDefaultPlugins()){this.canvas=document.getElementById("canvas1");var t=new createjs.LoadQueue;t.installPlugin(createjs.Sound),t.addEventListener("complete",this.handleComplete(this)),t.addEventListener("fileload",this.handleFileLoad),t.addEventListener("progress",this.handleQueueProgress(this)),t.loadManifest(lib.properties.manifest,!0,this.basePath+this.project+"/session"+this.session+"/"+this.chapter+"/")}},t.prototype.doneLoading=function(){this.isBusy=!1,this.dataLoaded=!0},t.prototype.handleFileLoad=function(t){"image"==t.item.type&&(window.createJSImages||(window.createJSImages={}),window.images||(window.images={}),window.createJSImages[t.item.id]=t.result,window.images[t.item.id]=t.result)},t.prototype.handleQueueProgress=function(t){return function(e){t.formattedProgress=e.loaded?(100*e.loaded).toFixed(0):"0",1==e.loaded&&(console.log("Done loading",t.isBusy),t.doneLoading())}},t.prototype.handleComplete=function(t){return this.paused=!1,function(){t.stage=new createjs.Stage("canvas1"),t.stage.addChild(new lib[t.animation]),createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",t.tickHandler(t)),createjs.Ticker.setPaused(!1),t.resizeAnimation(t);var e=null;t.stage.getChildAt(0)&&t.stage.getChildAt(0).soundTrack?e=t.stage.getChildAt(0).soundTrack:t.stage.getChildAt(0)&&t.stage.getChildAt(0).children[0]&&t.stage.getChildAt(0).children[0].soundTrack&&(e=t.stage.getChildAt(0).children[0].soundTrack),e||(e=createjs.Sound._instances[0])}},t.prototype.resizeAnimation=function(t){if(this.dataLoaded){var e=document.getElementById("canvas1").offsetWidth;document.getElementById("canvas1").style.height=e+"px",document.getElementById("canvas1").style.width=e+"px",t.sizeOfCanvas=e,t.stage&&(t.stage.width=e,t.stage.height=e)}},t.prototype.tickHandler=function(t){var e=!1;return function(i){t.paused||i.paused||t.stage.update();var n=t.stage.children[0];if(t.timeline=n.timeline,t.timeline.position%10==0&&(t.currentProgressWidth=parseFloat((t.timeline.position/t.timeline.duration*t.sizeOfCanvas).toFixed(0))),0==t.timeline.position&&(e=!1),t.timeline.duration-t.timeline.position==1&&!e){e=!0,createjs.Ticker.setPaused(!0);var s=t.sound;s&&s.setPaused(!0)}}},t.prototype.playPauseAnimation=function(){if(createjs&&createjs.Ticker){var t=!createjs.Ticker.getPaused(),e=this.sound;e&&e.setPaused(t),createjs.Ticker.setPaused(t),this.paused=t}},t.prototype.rewindAnimationTo=function(t){var e=this.stage.children[0],i=e.timeline;t<0&&(t=0),t>i.duration&&(t=i.duration-10);var n=this.sound;n&&n.setPaused(!0),this.paused?(e.gotoAndStop(t),this.stage.update(),n&&!n.getPaused()&&n.setPaused(!0)):e.gotoAndPlay(t)},t.prototype.rewindAnimation=function(t){t.stopPropagation();var e=this.stage.children[0].timeline,i=Math.round(t.offsetX/this.sizeOfCanvas*e.duration);this.rewindAnimationTo(i)},t.prototype.rewind5Sec=function(){var t=lib.properties.fps,e=this.stage.children[0].timeline.position-5*t;this.rewindAnimationTo(e)},t.prototype.fastForward5Sec=function(){var t=lib.properties.fps,e=this.stage.children[0].timeline.position+5*t;this.rewindAnimationTo(e)},t.prototype.playButtonAction=function(){this.dataLoaded?this.playPauseAnimation():this.loadAnimation()},t.prototype.muteVolume=function(){var t=this.sound;t&&(t.volume=0)},t.prototype.downVolume=function(){var t=this.sound;t&&t._getVolume()>.9&&(t.volume=t._getVolume()-.1)},t.prototype.upVolume=function(){var t=this.sound;t&&t._getVolume()<1&&(t.volume=t._getVolume()+.1)},t.prototype.render=function(){var t=this;return e("div",{class:"canvas-container"},!this.isClassroomModeOn&&this.dataLoaded?e("canvas",{width:"500",height:"500",id:"canvas1",onClick:function(){return t.playButtonAction()},class:"video-canvas"}):"",this.dataLoaded?"":e("img",{class:"frame-img",src:this.firstFramePath}),this.isClassroomModeOn?e("img",{class:"overlay-img",src:"/assets/img/play-button-disabled-overlay.png"}):"",this.isClassroomModeOn||this.isBusy||!this.paused?"":e("img",{class:"overlay-img",onClick:function(){return t.playButtonAction()},src:"/assets/img/play-button-overlay.png"}),this.dataLoaded?e("div",{class:"navControls"},e("div",{class:"progressBar",onClick:function(){return t.rewindAnimation.bind(t)}},e("div",{class:"currentProgress",style:{width:this.currentProgressWidth+"px"}})),e("div",{class:"button-panel"},e("ion-button",{color:"primary",onClick:function(){return t.rewind5Sec()}}," ",e("ion-icon",{name:"rewind"})," "),e("ion-button",{color:"primary",onClick:function(){return t.playButtonAction()}}," ",this.paused?e("ion-icon",{name:"play"}):e("ion-icon",{name:"pause"})),e("ion-button",{color:"primary",onClick:function(){return t.fastForward5Sec()}}," ",e("ion-icon",{name:"fastforward"})," "))):"",this.isBusy?e("div",null,e("div",{class:"uil-ring-css"},e("div",null),e("a",null,this.formattedProgress))):"")},Object.defineProperty(t,"is",{get:function(){return"app-animation"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{animation:{type:String,attr:"animation"},chapter:{type:String,attr:"chapter"},currentProgressWidth:{state:!0},dataLoaded:{state:!0},isClassroomModeOn:{type:Boolean,attr:"is-classroom-mode-on"},paused:{state:!0},project:{type:String,attr:"project"},session:{type:String,attr:"session"},sizeOfCanvas:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".video-canvas{background-color:#fff;position:relative;display:block;max-width:100%;height:auto}.canvas-container{position:relative}.frame-img{position:absolute;display:block;max-width:100%;width:auto;height:auto}.overlay-img{position:absolute;z-index:9999;top:0;display:block;max-width:100%;width:auto;height:auto}.button-panel{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.navControls{position:relative}.navControls .progressBar{position:relative;left:0;right:0;height:20px;background-color:#8aadea}.navControls .progressBar .currentProgress{position:relative;height:20px;background-color:#488aff;-webkit-transition:width .5s;transition:width .5s}"},enumerable:!0,configurable:!0}),t}();t.AppAnimation=i,Object.defineProperty(t,"__esModule",{value:!0})});