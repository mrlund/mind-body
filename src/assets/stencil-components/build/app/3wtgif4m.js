/*! Built with http://stenciljs.com */
const{h:t}=window.App;import{a as e,b as n,c as o,d as s,e as r,f as i,g as a,h as c,i as h,j as l,k as u}from"./chunk-88b8f1ee.js";class p{render(){return t("div",null,t("header",null,t("h1",null,"Stencil App Starter")),t("main",null,t("stencil-router",null,t("stencil-route",{url:"/",component:"app-home",exact:!0}),t("stencil-route",{url:"/profile/:name",component:"app-profile"}))))}static get is(){return"app-root"}static get style(){return"header{background:#5851ff;color:#fff;height:56px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26)}h1{font-size:1.4rem;font-weight:500;color:#fff;padding:0 12px}"}}class d{constructor(){this.unsubscribe=(()=>{}),this.componentProps={},this.exact=!1,this.group=null,this.groupIndex=null,this.routeRender=null,this.scrollTopOffset=null,this.match=null,this.activeInGroup=!1,this.scrollOnNextRender=!1}componentWillLoad(){this.joinGroup()}computeMatch(){this.group||(this.match=this.getMatch(this.location.pathname))}getMatch(t){return e(t,{path:this.url,exact:this.exact,strict:!0})}joinGroup(){const t=this;if(this.group){const e=e=>(this.match=e,new Promise(e=>{t.componentDidRerender=e}));this.unsubscribe=this.subscribeGroupMember({isMatch:this.getMatch.bind(this),listener:e,groupId:this.group,groupIndex:this.groupIndex})}}componentDidUnload(){this.unsubscribe&&this.unsubscribe()}componentDidUpdate(){if(this.match&&this.componentDidRerender){const t=this.el.firstElementChild;t&&t.componentOnReady?t.componentOnReady().then(()=>{this.componentDidRerender&&this.componentDidRerender(),this.componentDidRerender=void 0,this.activeInGroup=!!this.match,this.scrollOnNextRender=this.activeInGroup}):(this.componentDidRerender(),this.componentDidRerender=void 0,this.activeInGroup=!!this.match,this.scrollOnNextRender=this.activeInGroup)}else this.match&&this.scrollOnNextRender&&(this.scrollTo(),this.scrollOnNextRender=!1)}scrollTo(){if(null!=this.scrollTopOffset&&this.history&&!this.isServer)return"POP"===this.history.action&&null!=this.history.location.scrollPosition?this.queue.write(()=>{window.scrollTo(this.history.location.scrollPosition[0],this.history.location.scrollPosition[1])}):this.queue.write(()=>{window.scrollTo(0,this.scrollTopOffset)})}hostData(){if(!this.match||this.group&&!this.activeInGroup)return{style:{display:"none"}}}render(){if(!this.match)return null;const e=Object.assign({},this.componentProps,{history:this.history,match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},e,{component:this.component}));if(this.component){const n=this.component;return t(n,Object.assign({},e))}}static get is(){return"stencil-route"}static get properties(){return{activeInGroup:{state:!0},component:{type:String,attr:"component"},componentProps:{type:"Any",attr:"component-props"},el:{elementRef:!0},exact:{type:Boolean,attr:"exact"},group:{type:String,attr:"group",watchCallbacks:["joinGroup"]},groupIndex:{type:Number,attr:"group-index"},history:{type:"Any",attr:"history"},isServer:{context:"isServer"},location:{type:"Any",attr:"location",watchCallbacks:["computeMatch"]},match:{state:!0},queue:{context:"queue"},routeRender:{type:"Any",attr:"route-render"},scrollTopOffset:{type:Number,attr:"scroll-top-offset"},subscribeGroupMember:{type:"Any",attr:"subscribe-group-member"},url:{type:String,attr:"url"}}}static get style(){return"stencil-route.inactive{display:none}"}}function f(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function y(t,e){return f(t,e)?t.substr(e.length):t}function g(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function m(t){return"/"===t.charAt(0)?t:"/"+t}function w(t){return"/"===t.charAt(0)?t.substr(1):t}function b(t){const{pathname:e,search:n,hash:o}=t;let s=e||"/";return n&&"?"!==n&&(s+="?"===n.charAt(0)?n:`?${n}`),o&&"#"!==o&&(s+="#"===o.charAt(0)?o:`#${o}`),s}function v(t){return"/"===t.charAt(0)}function x(t,e){for(let n=e,o=n+1,s=t.length;o<s;n+=1,o+=1)t[n]=t[o];t.pop()}function O(t,e,n,o){let s;"string"==typeof t?(s=function(t){let e=t||"/",n="",o="";const s=e.indexOf("#");-1!==s&&(o=e.substr(s),e=e.substr(0,s));const r=e.indexOf("?");return-1!==r&&(n=e.substr(r),e=e.substr(0,r)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}}(t)).state=e:(void 0===(s=Object.assign({},t)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==e&&void 0===s.state&&(s.state=e));try{s.pathname=decodeURI(s.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}var r;return n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=function(t,e=""){const n=t&&t.split("/")||[];let o=e&&e.split("/")||[];const s=t&&v(t),r=e&&v(e),i=s||r;if(t&&v(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";let a;if(o.length){const t=o[o.length-1];a="."===t||".."===t||""===t}else a=!1;let c=0;for(let t=o.length;t>=0;t--){const e=o[t];"."===e?x(o,t):".."===e?(x(o,t),c++):c&&(x(o,t),c--)}if(!i)for(;c--;c)o.unshift("..");!i||""===o[0]||o[0]&&v(o[0])||o.unshift("");let h=o.join("/");return a&&"/"!==h.substr(-1)&&(h+="/"),h}(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s.query=(r=s.search)?(/^[?#]/.test(r)?r.slice(1):r).split("&").reduce((t,e)=>{let[n,o]=e.split("=");return t[n]=o?decodeURIComponent(o.replace(/\+/g," ")):"",t},{}):{},s}function P(t,...e){t||console.error(...e)}function I(t,...e){t||console.warn(...e)}n.injectProps(d,["location","history","subscribeGroupMember"]);const S=()=>{let t,e=[];return{setPrompt:e=>(I(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,n,o,s)=>{if(null!=t){const r="function"==typeof t?t(e,n):t;"string"==typeof r?"function"==typeof o?o(r,s):(I(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),s(!0)):s(!1!==r)}else s(!0)},appendListener:t=>{let n=!0;const o=(...e)=>{n&&t(...e)};return e.push(o),()=>{n=!1,e=e.filter(t=>t!==o)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},R=(t="scrollPositions")=>{let e=new Map;function n(t,n){if(e.set(t,n),o("sessionStorage")){const t=[];e.forEach((e,n)=>{t.push([n,e])}),window.sessionStorage.setItem("scrollPositions",JSON.stringify(t))}}return o("sessionStorage")&&(e=window.sessionStorage.getItem(t)?new Map(JSON.parse(window.sessionStorage.getItem(t))):e),"scrollRestoration"in history&&(history.scrollRestoration="manual"),{set:n,get:function(t){return e.get(t)},has:function(t){return e.has(t)},capture:function(t){n(t,[window.scrollX,window.scrollY])}}},k=()=>{try{return window.history.state||{}}catch(t){return{}}},T={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+w(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:w,decodePath:m},slash:{encodePath:m,decodePath:m}},A=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},j=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};var G=Object.prototype.hasOwnProperty;function L(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function M(t,e){if(L(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(var s=0;s<n.length;s++)if(!G.call(e,n[s])||!L(t[n[s]],e[n[s]]))return!1;return!0}var E=function(t,e,n,o){return new(n||(n=Promise))(function(s,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(i,a)}c((o=o.apply(t,e||[])).next())})};function U(t,e){return E(this,void 0,void 0,function*(){const n=[],o=t.pathname;for(let t=0;t<e.length;t++){let s=null;const r=n.some(n=>null!=n[1]&&null!=n[2]&&n[2]===e[t].groupId);s=r?null:e[t].isMatch(o),M(e[t].lastMatch,s)||(!r&&e[t].groupId?n.unshift([t,s,e[t].groupId]):n.push([t,s,e[t].groupId])),e[t].lastMatch=s}for(const[t,o]of n)null!=o?yield e[t].listener(o):e[t].listener(o)})}var H=function(t,e,n,o){return new(n||(n=Promise))(function(s,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?s(t.value):new n(function(e){e(t.value)}).then(i,a)}c((o=o.apply(t,e||[])).next())})};const D={browser:(t={})=>{P(s,"Browser history needs a DOM");const e=window.history,n=c(),o=!h(),u=R(),{forceRefresh:p=!1,getUserConfirmation:d=a,keyLength:w=6}=t,v=t.basename?g(m(t.basename)):"",x=t=>{t=t||{};const{key:e,state:n}=t,{pathname:o,search:s,hash:r}=window.location;let i=o+s+r;return I(!v||f(i,v),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+v+'".'),v&&(i=y(i,v)),O(i,n,e)},T=()=>Math.random().toString(36).substr(2,w),A=S(),j=t=>{u.capture(Y.location.key),Object.assign(Y,t),Y.location.scrollPosition=u.get(Y.location.key),Y.length=e.length,A.notifyListeners(Y.location,Y.action)},G=t=>{l(t)||E(x(t.state))},L=()=>{E(x(k()))};let M=!1;const E=t=>{if(M)M=!1,j();else{const e="POP";A.confirmTransitionTo(t,e,d,n=>{n?j({action:e,location:t}):U(t)})}},U=t=>{const e=Y.location;let n=D.indexOf(e.key);-1===n&&(n=0);let o=D.indexOf(t.key);-1===o&&(o=0);const s=n-o;s&&(M=!0,N(s))},H=x(k());let D=[H.key];const C=t=>v+b(t),N=t=>{e.go(t)};let z=0;const B=t=>{1===(z+=t)?(r(window,"popstate",G),o&&r(window,"hashchange",L)):0===z&&(i(window,"popstate",G),o&&i(window,"hashchange",L))};let q=!1;const Y={length:e.length,action:"POP",location:H,createHref:C,push:(t,o)=>{I(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const s=O(t,o,T(),Y.location);A.confirmTransitionTo(s,"PUSH",d,t=>{if(!t)return;const o=C(s),{key:r,state:i}=s;if(n)if(e.pushState({key:r,state:i},null,o),p)window.location.href=o;else{const t=D.indexOf(Y.location.key),e=D.slice(0,-1===t?0:t+1);e.push(s.key),D=e,j({action:"PUSH",location:s})}else I(void 0===i,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o})},replace:(t,o)=>{I(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const s=O(t,o,T(),Y.location);A.confirmTransitionTo(s,"REPLACE",d,t=>{if(!t)return;const o=C(s),{key:r,state:i}=s;if(n)if(e.replaceState({key:r,state:i},null,o),p)window.location.replace(o);else{const t=D.indexOf(Y.location.key);-1!==t&&(D[t]=s.key),j({action:"REPLACE",location:s})}else I(void 0===i,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)})},go:N,goBack:()=>N(-1),goForward:()=>N(1),block:(t="")=>{const e=A.setPrompt(t);return q||(B(1),q=!0),()=>(q&&(q=!1,B(-1)),e())},listen:t=>{const e=A.appendListener(t);return B(1),()=>{B(-1),e()}}};return Y},hash:(t={})=>{P(s,"Hash history needs a DOM");const e=window.history,n=u(),{getUserConfirmation:o=a,hashType:c="slash"}=t,h=t.basename?g(m(t.basename)):"",{encodePath:l,decodePath:p}=T[c],d=()=>{let t=p(A());return I(!h||f(t,h),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+h+'".'),h&&(t=y(t,h)),O(t)},w=S(),v=t=>{Object.assign(Y,t),Y.length=e.length,w.notifyListeners(Y.location,Y.action)};let x=!1,R=null;const k=()=>{const t=A(),e=l(t);if(t!==e)j(e);else{const t=d(),e=Y.location;if(!x&&(N=t,(C=e).pathname===N.pathname&&C.search===N.search&&C.hash===N.hash&&C.key===N.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,o){return t(e,n[o])});const o=typeof e;if(o!==typeof n)return!1;if("object"===o){const o=e.valueOf(),s=n.valueOf();if(o!==e||s!==n)return t(o,s);const r=Object.keys(e),i=Object.keys(n);return r.length===i.length&&r.every(function(o){return t(e[o],n[o])})}return!1}(C.state,N.state)))return;if(R===b(t))return;R=null,G(t)}},G=t=>{if(x)x=!1,v();else{const e="POP";w.confirmTransitionTo(t,e,o,n=>{n?v({action:e,location:t}):L(t)})}},L=t=>{const e=Y.location;let n=H.lastIndexOf(b(e));-1===n&&(n=0);let o=H.lastIndexOf(b(t));-1===o&&(o=0);const s=n-o;s&&(x=!0,D(s))},M=A(),E=l(M);M!==E&&j(E);const U=d();let H=[b(U)];const D=t=>{I(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let z=0;const B=t=>{1===(z+=t)?r(window,"hashchange",k):0===z&&i(window,"hashchange",k)};let q=!1;const Y={length:e.length,action:"POP",location:U,createHref:t=>"#"+l(h+b(t)),push:(t,e)=>{I(void 0===e,"Hash history cannot push state; it is ignored");const n=O(t,void 0,void 0,Y.location);w.confirmTransitionTo(n,"PUSH",o,t=>{if(!t)return;const e=b(n),o=l(h+e);if(A()!==o){R=e,(t=>window.location.hash=t)(o);const t=H.lastIndexOf(b(Y.location)),s=H.slice(0,-1===t?0:t+1);s.push(e),H=s,v({action:"PUSH",location:n})}else I(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),v()})},replace:(t,e)=>{I(void 0===e,"Hash history cannot replace state; it is ignored");const n=O(t,void 0,void 0,Y.location);w.confirmTransitionTo(n,"REPLACE",o,t=>{if(!t)return;const e=b(n),o=l(h+e);A()!==o&&(R=e,j(o));const s=H.indexOf(b(Y.location));-1!==s&&(H[s]=e),v({action:"REPLACE",location:n})})},go:D,goBack:()=>D(-1),goForward:()=>D(1),block:(t="")=>{const e=w.setPrompt(t);return q||(B(1),q=!0),()=>(q&&(q=!1,B(-1)),e())},listen:t=>{const e=w.appendListener(t);return B(1),()=>{B(-1),e()}}};return Y}};var C,N;class z{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.asyncListeners=[],this.asyncGroups={}}componentWillLoad(){this.history=D[this.historyType](),this.history.listen(t=>H(this,void 0,void 0,function*(){yield U(t=this.getLocation(t),this.asyncListeners),this.location=t})),this.location=this.getLocation(this.history.location)}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}render(){const e={location:this.location,titleSuffix:this.titleSuffix,root:this.root,history:this.history,subscribeGroupMember:t=>{!function(t,e,n){!function(t,e,n){const o=n.isMatch(t.pathname);n.lastMatch=o,e.push(n),e.sort((t,e)=>t.groupId<e.groupId?-1:t.groupId>e.groupId?1:t.groupIndex<e.groupIndex?-1:t.groupIndex>e.groupIndex?1:0)}(t,e,n)}(this.location,this.asyncListeners,t);const e=this.asyncListeners.filter(e=>e.groupId===t.groupId).length;this.asyncGroups[t.groupId]=this.asyncGroups[t.groupId]||{},this.asyncGroups[t.groupId].currentSize=e,this.asyncGroups[t.groupId].currentSize===this.asyncGroups[t.groupId].size&&U(location,this.asyncListeners)},createSubscriptionGroup:(t,e)=>{this.asyncGroups[t]=this.asyncGroups[t]||{},this.asyncGroups[t].size=e,this.asyncGroups[t].currentSize===this.asyncGroups[t].size&&U(location,this.asyncListeners)}};return t(n.Provider,{state:e},t("slot",null))}static get is(){return"stencil-router"}static get properties(){return{history:{state:!0},historyType:{type:String,attr:"history-type"},location:{state:!0},root:{type:String,attr:"root"},titleSuffix:{type:String,attr:"title-suffix"}}}}export{p as AppRoot,d as StencilRoute,z as StencilRouter};